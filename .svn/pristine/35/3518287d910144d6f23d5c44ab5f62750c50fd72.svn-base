package com.web.ddentist.hospital.crm.sms.service;

import java.lang.reflect.Type;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.google.common.reflect.TypeToken;
import com.google.gson.Gson;
import com.web.ddentist.hospital.crm.sms.util.SmsDetails;
import com.web.ddentist.hospital.crm.sms.util.SmsSendUtil;
import com.web.ddentist.mapper.SmsMapper;
import com.web.ddentist.vo.PatientVO;

@Service
public class SmsServiceImpl implements ISmsService {
	
	@Autowired
	private SmsSendUtil smsSendUtil;
	@Autowired
	private SmsMapper smsMapper;
	
	@Override
	public int sendSms(String smsData) {
		
		Gson gson = new Gson();
		Type type = new TypeToken<SmsDetails>(){
			private static final long serialVersionUID = -2898662349429608001L;}.getType();
		
		SmsDetails sms = gson.fromJson(smsData, type);
		List<PatientVO> ptList = smsMapper.listPtPhone(sms.getPtNumList());
		System.out.println(ptList);
		
		return 0;
	}

}
