<%@ page language="java" contentType="text/html; charset=UTF-8" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %>

<style>
/* 삭제,수정, 목록으로 버튼 */
    .listBtn, .modifyBtn, .deleteBtn{
        border-radius:20px;
        border:none;
        background-color: #904aff;
        color:white;
        font-family: 'Noto Sans KR', sans-serif;
        font-weight: 500;
    }

</style>
<!-- Head Image 시작 -->
<div class="boardHeadImage">
	<div class="wrapper">
		<div class="slide">
			<img src="/resources/images/layout/ddit/inquiryHeadImage.png" />
		</div>
	</div>
</div>
<!-- Head Image 끝 -->
<!-- main section 시작 -->
<section class="container">
	<!-- 문의게시판 nav 시작 -->
	<div class="row" style="margin-left: 7%; margin-top: 50px; width: 85%; height: 100px; border-bottom: 1px solid gray;">
		<div class="col-12">
			<h4 style="margin-left: 50px; margin-top: 20px; font-family: 'Noto Sans KR', sans-serif; font-weight: 700;">${inqVO.inqTitle}</h4>
		</div>
		<div class="col-6">
			<div class="row">
				<fmt:formatDate var="sysDate" value="${inqVO.inqDt}" pattern="yyyy-MM-dd HH-mm-ss"/>
				<h6 class="col-6" style="margin-left: 50px; font-family: 'Noto Sans KR', sans-serif; font-size: 14px;">작성일자: ${sysDate}</h6>
				<h6 class="col-3" style="font-family: 'Noto Sans KR', sans-serif; font-size: 14px; display: inline-block;">작성자: ${inqVO.inqWrtrNm}</h6>
			</div>
		</div>
	</div>
	<!-- 문의게시판 nav 끝 -->
	<div style="margin-left: 7%; margin-top: 50px; margin-bottom: 100px; width: 85%; height: auto;">
		<h5 style="margin-left: 50px; margin-right: 50px; font-family: 'Noto Sans KR', sans-serif;">
			${inqVO.inqContent}
		</h5>
	</div>
	<hr style="margin-left: 7%; width: 85%;" />
		<c:choose>
			<c:when test="${inqVO.ansVO.ansContent != null}">
				<div style="border: 1px solid gray; border-radius: 20px; margin-left: 7%; width: 85%; margin-bottom: 20px; height: auto;" style="display:none;" >
					<div class="row" style="margin-left: 7%; width: 85%; height: 100px;">
						<div class="col-12">
							<h5 style="margin-top: 20px; font-family: 'Noto Sans KR', sans-serif; font-weight: 700;">답변</h5>
						</div>
						<div class="col-6">
							<div class="row">
								<fmt:formatDate var="sysdate" value="${inqVO.ansVO.ansDt}" />
								<h6 class="col-6" style="font-family: 'Noto Sans KR', sans-serif; font-size: 14px;">작성일자: ${sysdate}</h6>
								<h6 class="col-3" style="font-family: 'Noto Sans KR', sans-serif; font-size: 14px; display: inline-block;">작성자: 관리자</h6>
							</div>
						</div>
					</div>
				<hr style="margin-left: 7%; width: 85%;" />
				<div style="margin-left: 7%;">
					<h5 style="margin: 50px 50px 60px 0px; font-family: 'Noto Sans KR', sans-serif;">
						${inqVO.ansVO.ansContent}
					</h5>
				</div>
			</div>
		</c:when>
		<c:otherwise>
			<div style="margin-left: 7%; margin-right: 7%;">
				<input type="button" class="btn btn-primary listBtn" value="목록으로" onclick="backToList()" style="margin-left: 50px;"/>
				<c:choose>
					<c:when test="${ptVO.ptNum == inqVO.ptNum }">
						<input type="button" class="btn btn-danger deleteBtn" value="게시물 삭제" style="float: right; margin-left: 10px; margin-right: 50px; background-color: #ff3e3e;" onclick="inquiryDelete()" />
						<input type="button" class="btn btn-primary modifyBtn" value="게시물 수정" style="float: right;" onclick="inquiryModify()" />
					</c:when>
				</c:choose>
			</div>
		</c:otherwise>
	</c:choose>
</section>
<script>
	// 목록으로 버튼을 누르면 목록으로 돌아간다.
	function backToList(){
		window.location.href="/ddit/inquiry";
	}
	
	// 게시물 삭제버튼을 누르면 삭제성공시 목록으로, 실패시 그 페이지에 남아있는다.
	function inquiryDelete(){
		var deleteChk = confirm("정말 삭제하시겠습니까?");
		
		if(deleteChk == true){
			window.location.href="/ddit/inquiry/delete?inqNum=" + ${inqVO.inqNum};
			alert("삭제가 완료되었습니다.")
		}else{
			alert("삭제가 취소되었습니다.");
		}
	}
	
	// 게시물 수정버튼을 누르면 create로 이동
	function inquiryModify(){
		window.location.href="/ddit/inquiry/write?inqNum=" + ${inqVO.inqNum};
	}
	
	
</script>