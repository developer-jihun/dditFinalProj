package com.web.ddentist.mapper;

import java.util.List;

import com.web.ddentist.vo.CrmVO;
import com.web.ddentist.vo.PatientVO;
import com.web.ddentist.vo.SmsVO;

public interface SmsMapper {
	
	/**
	 * CRM 대상의 CRM 정보를 가져옴
	 * 
	 * @param crmNumList CRM 번호 목록
	 * @return CRM 번호와 CRM 대상의 환자 번호, 환자 명, 환자 연락처, 다음 예약일이 포함된 VO의 목록
	 */
	public List<CrmVO> listCrm(List<String> crmNumList);
	
	/**
	 * 입력받은 키워드로 해당하는 CRM 정보를 검색<br>
	 * 
	 * @param keyword 검색창에 입력한 키워드
	 * @return 환자 번호, 환자 명, 처리상태, CRM사유, 다음예약일, CRM 예정일, CRM 처리일이 포함된 VO의 목록
	 */
	public List<CrmVO> searchPtOnCrmList(String keyword);
	
	/**
	 * 입력받은 키워드로 해당하는 환자 정보를 검색<br>
	 * 
	 * @param keyword 검색창에 입력한 키워드
	 * @return 환자 번호, 환자 명, 환자 연락처, 최근 진료일, 다음 예약일이 포함된 VO의 목록
	 */
	public List<PatientVO> searchPtOnTargetList(String keyword);
	
	/**
	 * 환자들의 이름과 연락처를 가져옴
	 * 
	 * @param ptNumList 환자 번호 목록
	 * @return 환자 번호, 환자 명, 환자 연락처, 다음 예약일이 담긴 VO 목록
	 */
	public List<PatientVO> listPtPhone(List<String> ptNumList);
	
	/**
	 * SMS의 발송이력 추가
	 * 
	 * @param smsVO SMS 발송정보가 담긴 VO
	 * @return 성공 : 1, 실패 : 0
	 */
	public int insertSms(SmsVO smsVO);
	
	/**
	 * CRM의 처리상태 및 처리일 갱신
	 * 
	 * @param crmNum 갱신할 CRM의 CRM 번호
	 * @return 성공 : 1, 실패 : 0
	 */
	public int updateCrmStatus(int crmNum);
	
	/**
	 * 처리상태가 처리완료인 CRM을 미완료 상태로 변경하고 처리일자를 삭제
	 * 
	 * @param crmNumList 미완료처리할 CRM의 CRM 번호 목록
	 * @return 미완료처리된 CRM 건수
	 */
	public int uncompleteCrm(List<String> crmNumList);
	
	/**
	 * 처리상태가 미완료인 CRM을 처리완료 상태로 변경하고 처리일자를 갱신
	 * 
	 * @param crmNumList 완료처리할 CRM의 CRM 번호 목록
	 * @return 완료처리된 CRM 건수
	 */
	public int completeCrm(List<String> crmNumList);
	
	/**
	 * CRM을 삭제
	 * 
	 * @param crmNumList 삭제할 CRM의 CRM 번호
	 * @return 삭제처리된 CRM 건수
	 */
	public int deleteCrm(List<String> crmNumList);
	
	/**
	 * 정해진 기간의 SMS 발송 이력을 가져옴
	 * 
	 * @return SMS 발송이력 목록
	 */
	public List<SmsVO> listSmsHist();
	
}
