<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.web.ddentist.mapper.TxManagementMapper">
	
	<!-- 초기 처치 리스트 가져오기 -->
	<select id="list" resultType="txcVO">
		SELECT TXC_CD, TXC_NM, TXC_PRICE FROM TX_CODE
	</select>
	
	<!-- 처치 등록하기 -->
	<insert id="insert" parameterType="txcVO">
		INSERT INTO TX_CODE VALUES(#{txcCd},#{txcNm},#{txcPrice})
	</insert>
	
	<!-- 처치 삭제하기 -->
	<delete id="deletePost" parameterType="txcVO">
		DELETE FROM TX_CODE WHERE TXC_CD=#{txcCd}
	</delete>
	
	<!-- 처치 수정하기 -->
	<update id="updatePost" parameterType="txcVO">
		UPDATE TX_CODE SET TXC_NM=#{txcNm},TXC_PRICE=#{txcPrice} WHERE TXC_CD=#{txcCd}
	</update>
	
	<!-- 중복 개수 가져오기 -->
	<select id="detail" parameterType="String" resultType="int">
		SELECT COUNT(*) FROM TX_CODE WHERE TXC_CD=#{txcCd}
	</select>
	
	<!-- 해당하는 약품 한 줄 가져오기 -->
	<select id="drugDetail" parameterType="int" resultType="drugVO">
		SELECT DRUG_NUM, DRUG_NM, DRUG_NM_EN, DRUG_TYPE, DRUG_INGRE, DRUG_COMP, DRUG_COUNT 
		FROM DRUG
		WHERE DRUG_NUM=#{drugNum}
	</select>

</mapper>