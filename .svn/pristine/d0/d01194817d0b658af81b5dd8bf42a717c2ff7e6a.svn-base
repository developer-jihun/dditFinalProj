<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.web.ddentist.mapper.PcheckupMapper">
	
	
	<select id="pCheckupList" parameterType="hashMap">
		SELECT ROW_NUMBER() OVER(ORDER BY C.CHK_DT) row_num ,
		       (
		       SELECT EMP_NM
		       FROM EMPLOYEE E
		       WHERE E.EMP_NUM = C.EMP_NUM
		       ) AS EMP_NM,
		       C.CHK_DT,
		       T.TX_CONTENT,
		       C.CHK_NUM,
		       T.TX_SN
		FROM CHECKUP C, TX T
		WHERE C.CHK_NUM = T.CHK_NUM
		AND C.PT_NUM = #{ptNum}
		AND CHK_DT BETWEEN TO_DATE(#{sDate},'YYYY-MM-DD') AND TO_DATE({#{eDate}},'YYYY-MM-DD')
	</select>
	
</mapper>